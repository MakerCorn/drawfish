<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Mermaid Diagram Generator</title>
    <link rel="stylesheet" href="styles.css">
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>
</head>
<body>
    <div class="container">
        <header>
            <h1>AI Mermaid Diagram Generator</h1>
            <button id="settingsBtn" class="icon-btn" title="Settings">‚öôÔ∏è</button>
        </header>

        <div class="main-content">
            <div class="input-section">
                <h2>Describe Your Diagram</h2>
                <textarea
                    id="userInput"
                    placeholder="Describe the diagram you want to create. For example: 'Create a flowchart showing the user authentication process with login, verification, and success/error paths'"
                    rows="4"
                ></textarea>
                <button id="generateBtn" class="primary-btn">Generate Diagram</button>
                <div id="loadingIndicator" class="loading" style="display: none;">
                    <div class="spinner"></div>
                    <span>Generating diagram...</span>
                </div>
            </div>

            <div class="editor-preview-container">
                <div class="editor-section">
                    <div class="section-header">
                        <h2>Mermaid Code</h2>
                        <button id="copyCodeBtn" class="icon-btn" title="Copy code">üìã</button>
                    </div>
                    <textarea
                        id="mermaidCode"
                        placeholder="Mermaid diagram code will appear here..."
                        rows="20"
                    ></textarea>
                    <button id="updateDiagramBtn" class="secondary-btn">Update Diagram</button>
                </div>

                <div class="preview-section">
                    <div class="section-header">
                        <h2>Preview</h2>
                        <div class="export-buttons">
                            <button id="exportSvgBtn" class="icon-btn" title="Export as SVG">SVG</button>
                            <button id="exportPngBtn" class="icon-btn" title="Export as PNG">PNG</button>
                            <button id="exportJpegBtn" class="icon-btn" title="Export as JPEG">JPEG</button>
                        </div>
                    </div>
                    <div id="diagramPreview" class="diagram-container">
                        <div class="empty-state">Your diagram will appear here</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h2>AI Provider Settings</h2>
                <button id="closeModalBtn" class="close-btn">&times;</button>
            </div>
            <div class="modal-body">
                <div class="form-group">
                    <label for="providerSelect">AI Provider</label>
                    <select id="providerSelect">
                        <option value="ollama">Ollama</option>
                        <option value="lmstudio">LM Studio</option>
                        <option value="azure">Azure OpenAI</option>
                        <option value="bedrock">Amazon Bedrock</option>
                        <option value="vertex">Google Vertex AI</option>
                    </select>
                </div>

                <div id="ollamaConfig" class="provider-config">
                    <div class="form-group">
                        <label for="ollamaUrl">Ollama URL</label>
                        <input type="text" id="ollamaUrl" placeholder="http://master.local:11434" value="http://master.local:11434">
                    </div>
                    <div class="form-group">
                        <label for="ollamaModel">Model</label>
                        <input type="text" id="ollamaModel" placeholder="gpt-oss:latest" value="gpt-oss:latest">
                    </div>
                </div>

                <div id="lmstudioConfig" class="provider-config" style="display: none;">
                    <div class="form-group">
                        <label for="lmstudioUrl">LM Studio URL</label>
                        <input type="text" id="lmstudioUrl" placeholder="http://localhost:1234" value="http://localhost:1234">
                    </div>
                    <div class="form-group">
                        <label for="lmstudioModel">Model</label>
                        <input type="text" id="lmstudioModel" placeholder="local-model" value="local-model">
                    </div>
                </div>

                <div id="azureConfig" class="provider-config" style="display: none;">
                    <div class="form-group">
                        <label for="azureEndpoint">Endpoint</label>
                        <input type="text" id="azureEndpoint" placeholder="https://your-resource.openai.azure.com/">
                    </div>
                    <div class="form-group">
                        <label for="azureApiKey">API Key</label>
                        <input type="password" id="azureApiKey" placeholder="Your API key">
                    </div>
                    <div class="form-group">
                        <label for="azureDeployment">Deployment Name</label>
                        <input type="text" id="azureDeployment" placeholder="your-deployment-name">
                    </div>
                </div>

                <div id="bedrockConfig" class="provider-config" style="display: none;">
                    <div class="form-group">
                        <label for="awsRegion">AWS Region</label>
                        <input type="text" id="awsRegion" placeholder="us-east-1" value="us-east-1">
                    </div>
                    <div class="form-group">
                        <label for="awsAccessKey">Access Key ID</label>
                        <input type="password" id="awsAccessKey" placeholder="Your access key">
                    </div>
                    <div class="form-group">
                        <label for="awsSecretKey">Secret Access Key</label>
                        <input type="password" id="awsSecretKey" placeholder="Your secret key">
                    </div>
                    <div class="form-group">
                        <label for="bedrockModel">Model ID</label>
                        <input type="text" id="bedrockModel" placeholder="anthropic.claude-v2" value="anthropic.claude-v2">
                    </div>
                </div>

                <div id="vertexConfig" class="provider-config" style="display: none;">
                    <div class="form-group">
                        <label for="vertexProjectId">Project ID</label>
                        <input type="text" id="vertexProjectId" placeholder="your-project-id">
                    </div>
                    <div class="form-group">
                        <label for="vertexLocation">Location</label>
                        <input type="text" id="vertexLocation" placeholder="us-central1" value="us-central1">
                    </div>
                    <div class="form-group">
                        <label for="vertexModel">Model</label>
                        <input type="text" id="vertexModel" placeholder="gemini-pro" value="gemini-pro">
                    </div>
                </div>

                <button id="saveSettingsBtn" class="primary-btn">Save Settings</button>
            </div>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>
